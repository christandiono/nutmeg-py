<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>Beam Stats Example &mdash; Nutmeg-Py Documentation</title>
    <link rel="stylesheet" href="../../static/sphinxdoc.css" type="text/css" />
    <link rel="stylesheet" href="../../static/pygments.css" type="text/css" />
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../../',
        VERSION:     '0.1.0-devel',
        COLLAPSE_MODINDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="../../static/jquery.js"></script>
    <script type="text/javascript" src="../../static/doctools.js"></script>
    <link rel="top" title="Nutmeg-Py Documentation" href="../../index.html" />
    <link rel="up" title="User Guide" href="../index.html" />
    <link rel="next" title="Using The Stats UI Tools" href="stats_ui.html" />
    <link rel="prev" title="Tutorials" href="../tutorial.html" />
  <meta name="keywords" content="nutmeg, meg, magnetic source imaging,
  python, neuroscience">

  </head>
  <body>
  <div id="header">
  <table width="100%">
  <tr>
   <td style="text-align:right;vertical-align:bottom">Nutmeg in Python
    </td>
  </tr>
  </table>
  </div>

    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../../genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="../../modindex.html" title="Global Module Index"
             accesskey="M">modules</a> |</li>
        <li class="right" >
          <a href="stats_ui.html" title="Using The Stats UI Tools"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="../tutorial.html" title="Tutorials"
             accesskey="P">previous</a> |</li>
  <li><a href="../../index.html">Home</a> |&nbsp;</li>
  <li><a href="../../contents.html">Documentation</a> |&nbsp;</li>

          <li><a href="../index.html" accesskey="U">User Guide</a> &raquo;</li> 
      </ul>
    </div>

      <div class="sphinxsidebar">
        <div class="sphinxsidebarwrapper">
            <h3><a href="../../contents.html">Table Of Contents</a></h3>
            <ul>
<li><a class="reference external" href="">Beam Stats Example</a><ul>
<li><a class="reference external" href="#comparing-data">Comparing Data</a><ul>
<li><a class="reference external" href="#from-matlab-nutmeg-pointers">From Matlab-Nutmeg Pointers</a></li>
</ul>
</li>
<li><a class="reference external" href="#snpm-stats-analysis">SnPM Stats Analysis</a><ul>
<li><a class="reference external" href="#results">Results</a></li>
<li><a class="reference external" href="#coercing-matlab-nutmeg-results">Coercing Matlab-Nutmeg Results</a></li>
</ul>
</li>
<li><a class="reference external" href="#viewing-the-results">Viewing The Results</a></li>
<li><a class="reference external" href="#saving-loading-the-results">Saving/Loading The Results</a></li>
</ul>
</li>
</ul>

            <h4>Previous topic</h4>
            <p class="topless"><a href="../tutorial.html"
                                  title="previous chapter">Tutorials</a></p>
            <h4>Next topic</h4>
            <p class="topless"><a href="stats_ui.html"
                                  title="next chapter">Using The Stats UI Tools</a></p>
            <h3>This Page</h3>
            <ul class="this-page-menu">
              <li><a href="../../sources/users/beam_stats_tutorial/comps_tutorial.txt"
                     rel="nofollow">Show Source</a></li>
            </ul>
          <div id="searchbox" style="display: none">
            <h3>Quick search</h3>
              <form class="search" action="../../search.html" method="get">
                <input type="text" name="q" size="18" />
                <input type="submit" value="Go" />
                <input type="hidden" name="check_keywords" value="yes" />
                <input type="hidden" name="area" value="default" />
              </form>
              <p class="searchtip" style="font-size: 90%">
              Enter search terms or a module, class or function name.
              </p>
          </div>
          <script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body">
            
  <div class="section" id="beam-stats-example">
<h1>Beam Stats Example<a class="headerlink" href="#beam-stats-example" title="Permalink to this headline">¶</a></h1>
<p>The <a title="" class="reference external" href="../../api/generated/nutmeg.stats.beam_stats.html#module-nutmeg.stats.beam_stats"><tt class="xref docutils literal"><span class="pre">beam_stats</span></tt></a> module in Nutmeg-Py provides objects to align data across subjects and conditions, and then perform non-parametric statstical analyses on the data comparisons.</p>
<div class="section" id="comparing-data">
<h2>Comparing Data<a class="headerlink" href="#comparing-data" title="Permalink to this headline">¶</a></h2>
<p>Comparing data starts with the <a title="nutmeg.stats.beam_stats.BeamComparator" class="reference external" href="../../api/generated/nutmeg.stats.beam_stats.html#nutmeg.stats.beam_stats.BeamComparator"><tt class="xref docutils literal"><span class="pre">BeamComparator</span></tt></a> type. The common functionality of a BeamComparator is:</p>
<ul class="simple">
<li>to align voxels across subjects (and potentially across conditions)</li>
<li>to index beams by (condition, subject)</li>
<li>to index beam signals by (condition, subjet), and return the signals aligned voxel-wise across subjects</li>
<li>to return per-subject samples and an average, according to the comparison being made</li>
</ul>
<p>There are two flavors of comparison, the <a title="nutmeg.stats.beam_stats.BeamActivationAverager" class="reference external" href="../../api/generated/nutmeg.stats.beam_stats.html#nutmeg.stats.beam_stats.BeamActivationAverager"><tt class="xref docutils literal"><span class="pre">BeamActivationAverager</span></tt></a>, and the <a title="nutmeg.stats.beam_stats.BeamContrastAverager" class="reference external" href="../../api/generated/nutmeg.stats.beam_stats.html#nutmeg.stats.beam_stats.BeamContrastAverager"><tt class="xref docutils literal"><span class="pre">BeamContrastAverager</span></tt></a>. The BeamActivationAverager only looks at functional activation (some transform of the active-to-control ratio), while the BeamContrastAverager looks at the difference in activations across two conditions.</p>
<p>Here are some examples for constructing comparators:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">nutmeg.stats</span> <span class="kn">import</span> <span class="n">beam_stats</span> <span class="k">as</span> <span class="n">bstats</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">glob</span> <span class="kn">import</span> <span class="n">glob</span>
</pre></div>
</div>
<p>A BeamComparator can be constructed either with a list of paths to tfbeam mat files, or with actual <a title="nutmeg.core.tfbeam.TFBeam" class="reference external" href="../../api/generated/nutmeg.core.tfbeam.html#nutmeg.core.tfbeam.TFBeam"><tt class="xref docutils literal"><span class="pre">TFBeam</span></tt></a> objects. Choosing paths constructs the comparator quickly, since the data loads only on call.</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">bfiles</span> <span class="o">=</span> <span class="n">glob</span><span class="p">(</span><span class="s">&#39;NC_RightDom_Digits_New/s_beamtf*spatnorm.mat&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span> <span class="nn">os</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">subjs</span> <span class="o">=</span> <span class="p">[</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="n">b</span><span class="p">)[</span><span class="mf">1</span><span class="p">]</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s">&#39;_&#39;</span><span class="p">)[</span><span class="mf">2</span><span class="p">]</span> <span class="k">for</span> <span class="n">b</span> <span class="ow">in</span> <span class="n">bfiles</span><span class="p">]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">subjs</span>
<span class="go">[&#39;DS&#39;, &#39;HJ&#39;, &#39;HL&#39;, &#39;MA&#39;, &#39;MP&#39;, &#39;NS&#39;, &#39;NS&#39;, &#39;RB&#39;, &#39;WC&#39;, &#39;YC&#39;, &#39;ZJ&#39;]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">conds</span> <span class="o">=</span> <span class="p">[</span><span class="s">&#39;cond1&#39;</span><span class="p">]</span> <span class="o">*</span> <span class="nb">len</span><span class="p">(</span><span class="n">subjs</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">conds</span>
<span class="go">[&#39;cond1&#39;, &#39;cond1&#39;, &#39;cond1&#39;, &#39;cond1&#39;, ...]</span>
</pre></div>
</div>
<p>To cut down on the size in memory of all the subject TFBeams, I&#8217;ll choose to fix the active-to-control ratio to be &#8216;F dB&#8217;:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">comp</span> <span class="o">=</span> <span class="n">bstats</span><span class="o">.</span><span class="n">BeamActivationAverager</span><span class="p">(</span><span class="n">bfiles</span><span class="p">,</span> <span class="n">subjs</span><span class="p">,</span> <span class="n">conds</span><span class="p">,</span> <span class="n">fixed_comparison</span><span class="o">=</span><span class="s">&#39;F dB&#39;</span><span class="p">)</span>
</pre></div>
</div>
<p>Now it&#8217;s possible  to perform the comparison. The <a title="nutmeg.stats.beam_stats.BeamComparator.compare" class="reference external" href="../../api/generated/nutmeg.stats.beam_stats.html#nutmeg.stats.beam_stats.BeamComparator.compare"><tt class="xref docutils literal"><span class="pre">compare()</span></tt></a> method returns the per-subject samples and the across subject average for each condition configuration given. By default, it forms comparisons on all the conditions available. For example, the <a title="nutmeg.stats.beam_stats.BeamActivationAverager.compare" class="reference external" href="../../api/generated/nutmeg.stats.beam_stats.html#nutmeg.stats.beam_stats.BeamActivationAverager.compare"><tt class="xref docutils literal"><span class="pre">compare()</span></tt></a> method defined on BeamActivationAverager will returns comparisons for all conditions by default:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">samples</span><span class="p">,</span> <span class="n">avgs</span> <span class="o">=</span> <span class="n">comp</span><span class="o">.</span><span class="n">compare</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">len</span><span class="p">(</span><span class="n">samples</span><span class="p">),</span> <span class="nb">len</span><span class="p">(</span><span class="n">avgs</span><span class="p">)</span>
<span class="go">(1, 1)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">cond1_avg</span> <span class="o">=</span> <span class="n">avgs</span><span class="p">[</span><span class="mf">0</span><span class="p">]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">cond1_samps</span> <span class="o">=</span> <span class="n">samples</span><span class="p">[</span><span class="mf">0</span><span class="p">]</span>
</pre></div>
</div>
<div class="section" id="from-matlab-nutmeg-pointers">
<h3>From Matlab-Nutmeg Pointers<a class="headerlink" href="#from-matlab-nutmeg-pointers" title="Permalink to this headline">¶</a></h3>
<p><em>This functionality is not fully implemented for the RAID environment!</em></p>
<p>It is also possible to construct comparators from &#8220;pointers&#8221; created in Matlab-Nutmeg:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">comp</span> <span class="o">=</span> <span class="n">bstats</span><span class="o">.</span><span class="n">BeamContrastAverager</span><span class="o">.</span><span class="n">from_matlab_ptr_file</span><span class="p">(</span><span class="s">&#39;meg_6subj2cond/PM_HL_OJ_CZ_TC_WK_first75L_new_ptr.mat&#39;</span><span class="p">,</span> <span class="n">fixed_comparison</span><span class="o">=</span><span class="s">&#39;F dB&#39;</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="snpm-stats-analysis">
<h2>SnPM Stats Analysis<a class="headerlink" href="#snpm-stats-analysis" title="Permalink to this headline">¶</a></h2>
<p>The <a title="" class="reference external" href="../../api/generated/nutmeg.stats.tfbeam_stats.html#module-nutmeg.stats.tfbeam_stats"><tt class="xref docutils literal"><span class="pre">tfbeam_stats</span></tt></a> module also includes a number of objects of the general type <a title="nutmeg.stats.tfbeam_stats.SnPMTester" class="reference external" href="../../api/generated/nutmeg.stats.tfbeam_stats.html#nutmeg.stats.tfbeam_stats.SnPMTester"><tt class="xref docutils literal"><span class="pre">SnPMTester</span></tt></a>. These objects are created using a BeamComparator and perform a test on the condition, or conditions pair specified.</p>
<p><strong>Note: the currently implementation of these tests requires that the null distribution is mean zero and symmetrical! The &#8220;F dB&#8221; comparison satisfies this assumption</strong></p>
<p>There are two subclasses of SnPMTester implemented:</p>
<p><a title="nutmeg.stats.tfbeam_stats.SnPMOneSampT" class="reference external" href="../../api/generated/nutmeg.stats.tfbeam_stats.html#nutmeg.stats.tfbeam_stats.SnPMOneSampT"><tt class="xref docutils literal"><span class="pre">SnPMOneSampT</span></tt></a></p>
<ul class="simple">
<li>Compare group activity or group contrast to the null distribution</li>
<li>The condition argument must be a single condition label (when using a BeamActivationAverager), or a conditions contrast pair (when using a BeamContrastAverager)</li>
</ul>
<p><a title="nutmeg.stats.tfbeam_stats.SnPMUnpairedT" class="reference external" href="../../api/generated/nutmeg.stats.tfbeam_stats.html#nutmeg.stats.tfbeam_stats.SnPMUnpairedT"><tt class="xref docutils literal"><span class="pre">SnPMUnpairedT</span></tt></a></p>
<ul class="simple">
<li>Compare two groups of activity or contrast to each other</li>
<li>The condition argument must be two condition labels (when using a BeamActivationAverager), or two conditions contrast pairs (when using a BeamContrastAverager)</li>
</ul>
<p>Using the BeamContrastAverager &#8220;comp&#8221; from above, I will set up a SnPMOneSampT tester. When setting the number of permutations, there are a few options. To find out how many permutations are possible, you can use this method (defined on both classes):</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">nutmeg.stats</span> <span class="kn">import</span> <span class="n">tfbeam_stats</span> <span class="k">as</span> <span class="n">tfbstats</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">tfbstats</span><span class="o">.</span><span class="n">SnPMOneSampT</span><span class="o">.</span><span class="n">num_possible_permutations</span><span class="p">(</span><span class="n">comp</span><span class="o">.</span><span class="n">conds</span><span class="p">,</span> <span class="n">comp</span><span class="o">.</span><span class="n">c_labels</span><span class="p">,</span> <span class="n">comp</span><span class="o">.</span><span class="n">s_labels</span><span class="p">)</span>
<span class="go">64</span>
</pre></div>
</div>
<p>This number effectively determines the courseness of the estimation of the null distribution, and more permutations provide greater significance. Of course, the testing is slower for more permutations.</p>
<p>There is a possible savings of a factor of 2 when testing all possible permutations, since half of the re-weightings are mirrors of the other half. To enforce testing in this mode, you can set the flag &#8220;force_half_perms&#8221; in the tester constructor, like this (in this case, the n_perm argument is ignored):</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">comp</span><span class="o">.</span><span class="n">conds</span>
<span class="go">array([1, 2])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">tester</span> <span class="o">=</span> <span class="n">tfbstats</span><span class="o">.</span><span class="n">SnPMOneSampT</span><span class="p">(</span><span class="n">comp</span><span class="p">,</span> <span class="p">[</span><span class="mf">1</span><span class="p">,</span><span class="mf">2</span><span class="p">],</span> <span class="mf">1234</span><span class="p">,</span> <span class="n">force_half_perms</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">tester</span><span class="o">.</span><span class="n">n_perm</span>
<span class="go">64</span>
</pre></div>
</div>
<p>If truncating the number of permutations, then the statistical test reweightings will be presented in random order:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">tester</span> <span class="o">=</span> <span class="n">tfbstats</span><span class="o">.</span><span class="n">SnPMOneSampT</span><span class="p">(</span><span class="n">comp</span><span class="p">,</span> <span class="p">[</span><span class="mf">1</span><span class="p">,</span><span class="mf">2</span><span class="p">],</span> <span class="mf">20</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">tester</span><span class="o">.</span><span class="n">n_perm</span>
<span class="go">20</span>
</pre></div>
</div>
<div class="section" id="results">
<h3>Results<a class="headerlink" href="#results" title="Permalink to this headline">¶</a></h3>
<p>To make the test, simply run the &#8220;test&#8221; method on the SnPMTester:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">results</span> <span class="o">=</span> <span class="n">tester</span><span class="o">.</span><span class="n">test</span><span class="p">()</span>
<span class="go">performing stat test at (t,f) = ( 0 0 )</span>
<span class="go">performing stat test at (t,f) = ( 0 1 )</span>
<span class="go">performing stat test at (t,f) = ( 0 2 )</span>
<span class="gp">...</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">results</span>
<span class="go">&lt;nutmeg.stats.tfstats_results.TimeFreqSnPMResults object at 0x33c9ff0&gt;</span>
</pre></div>
</div>
<p>The results object is a <a title="nutmeg.stats.tfstats_results.TimeFreqSnPMResults" class="reference external" href="../../api/generated/nutmeg.stats.tfstats_results.html#nutmeg.stats.tfstats_results.TimeFreqSnPMResults"><tt class="xref docutils literal"><span class="pre">TimeFreqSnPMResults</span></tt></a> object. This object holds both the maximal and minimal stats distributions, and the test&#8217;s true statistic from the data. With this information, I can perform the following tasks:</p>
<p><a title="nutmeg.stats.tfstats_results.TimeFreqSnPMResults.threshold" class="reference external" href="../../api/generated/nutmeg.stats.tfstats_results.html#nutmeg.stats.tfstats_results.TimeFreqSnPMResults.threshold"><tt class="xref docutils literal"><span class="pre">threshold()</span></tt></a>, example:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">tmap</span><span class="p">,</span> <span class="n">alpha</span> <span class="o">=</span> <span class="n">results</span><span class="o">.</span><span class="n">threshold</span><span class="p">(</span><span class="o">.</span><span class="mf">23</span><span class="p">,</span> <span class="s">&#39;neg&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">alpha</span>
<span class="go">0.20000000000000001</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">map</span> <span class="o">=</span> <span class="n">results</span><span class="o">.</span><span class="n">t</span> <span class="o">&lt;=</span> <span class="n">tmap</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">tmap</span><span class="p">,</span> <span class="n">alpha</span> <span class="o">=</span> <span class="n">results</span><span class="o">.</span><span class="n">threshold</span><span class="p">(</span><span class="o">.</span><span class="mf">23</span><span class="p">,</span> <span class="s">&#39;neg&#39;</span><span class="p">,</span> <span class="n">corrected_dims</span><span class="o">=</span><span class="p">(</span><span class="mf">1</span><span class="p">,</span><span class="mf">2</span><span class="p">))</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">tmap</span>
<span class="go">array([[[-6.9315619, -6.9315619, -6.9315619, -6.9315619],</span>
<span class="go">        [-6.9315619, -6.9315619, -6.9315619, -6.9315619], ....</span>
</pre></div>
</div>
<p><a title="nutmeg.stats.tfstats_results.TimeFreqSnPMResults.uncorrected_p_score" class="reference external" href="../../api/generated/nutmeg.stats.tfstats_results.html#nutmeg.stats.tfstats_results.TimeFreqSnPMResults.uncorrected_p_score"><tt class="xref docutils literal"><span class="pre">uncorrected_p_score()</span></tt></a>, example:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">pmap</span> <span class="o">=</span> <span class="n">results</span><span class="o">.</span><span class="n">uncorrected_p_score</span><span class="p">(</span><span class="s">&#39;pos&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="p">(</span><span class="n">pmap</span> <span class="o">&lt;</span> <span class="o">.</span><span class="mf">15</span><span class="p">)</span><span class="o">.</span><span class="n">any</span><span class="p">()</span>
<span class="go">True</span>
<span class="gp">&gt;&gt;&gt; </span><span class="p">(</span><span class="n">pmap</span> <span class="o">&lt;</span> <span class="o">.</span><span class="mf">15</span><span class="p">)</span><span class="o">.</span><span class="n">sum</span><span class="p">()</span>
<span class="go">34513</span>
</pre></div>
</div>
<p><a title="nutmeg.stats.tfstats_results.TimeFreqSnPMResults.p_score_from_maximal_statistics" class="reference external" href="../../api/generated/nutmeg.stats.tfstats_results.html#nutmeg.stats.tfstats_results.TimeFreqSnPMResults.p_score_from_maximal_statistics"><tt class="xref docutils literal"><span class="pre">p_score_from_maximal_statistics()</span></tt></a>, example:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">pmap</span> <span class="o">=</span> <span class="n">results</span><span class="o">.</span><span class="n">p_score_from_maximal_statistics</span><span class="p">(</span><span class="s">&#39;pos&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="p">(</span><span class="n">pmap</span> <span class="o">&lt;</span> <span class="o">.</span><span class="mf">15</span><span class="p">)</span><span class="o">.</span><span class="n">sum</span><span class="p">()</span>
<span class="go">35</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">pmap</span> <span class="o">=</span> <span class="n">results</span><span class="o">.</span><span class="n">p_score_from_maximal_statistics</span><span class="p">(</span><span class="s">&#39;pos&#39;</span><span class="p">,</span> <span class="n">corrected_dims</span><span class="o">=</span><span class="p">(</span><span class="mf">1</span><span class="p">,))</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">pmap</span><span class="o">.</span><span class="n">shape</span>
<span class="gp">&gt;&gt;&gt; </span><span class="p">(</span><span class="n">pmap</span> <span class="o">&lt;</span> <span class="o">.</span><span class="mf">15</span><span class="p">)</span><span class="o">.</span><span class="n">sum</span><span class="p">()</span>
<span class="go">0</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">pmap</span> <span class="o">=</span> <span class="n">results</span><span class="o">.</span><span class="n">p_score_from_maximal_statistics</span><span class="p">(</span><span class="s">&#39;pos&#39;</span><span class="p">,</span> <span class="n">pooled_dims</span><span class="o">=</span><span class="p">(</span><span class="mf">1</span><span class="p">,))</span>
<span class="gp">&gt;&gt;&gt; </span><span class="p">(</span><span class="n">pmap</span> <span class="o">&lt;</span> <span class="o">.</span><span class="mf">15</span><span class="p">)</span><span class="o">.</span><span class="n">sum</span><span class="p">()</span>
<span class="go">141</span>
</pre></div>
</div>
<p><a title="nutmeg.stats.tfstats_results.TimeFreqSnPMResults.map_of_significant_clusters" class="reference external" href="../../api/generated/nutmeg.stats.tfstats_results.html#nutmeg.stats.tfstats_results.TimeFreqSnPMResults.map_of_significant_clusters"><tt class="xref docutils literal"><span class="pre">map_of_significant_clusters()</span></tt></a>, example:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="p">(</span><span class="n">results</span><span class="o">.</span><span class="n">uncorrected_p_score</span><span class="p">(</span><span class="s">&#39;pos&#39;</span><span class="p">)</span> <span class="o">&gt;</span> <span class="o">.</span><span class="mf">15</span><span class="p">)</span><span class="o">.</span><span class="n">any</span><span class="p">()</span>
<span class="go">True</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">cmap</span> <span class="o">=</span> <span class="n">results</span><span class="o">.</span><span class="n">map_of_significant_clusters</span><span class="p">(</span><span class="s">&#39;pos&#39;</span><span class="p">,</span> <span class="n">alpha</span><span class="o">=.</span><span class="mf">15</span><span class="p">,</span> <span class="n">gamma</span><span class="o">=.</span><span class="mf">01</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">mask</span> <span class="o">=</span> <span class="n">cmap</span> <span class="o">&gt;</span> <span class="mf">0</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">mask</span><span class="o">.</span><span class="n">sum</span><span class="p">()</span>
<span class="go">9976</span>
</pre></div>
</div>
</div>
<div class="section" id="coercing-matlab-nutmeg-results">
<h3>Coercing Matlab-Nutmeg Results<a class="headerlink" href="#coercing-matlab-nutmeg-results" title="Permalink to this headline">¶</a></h3>
<p>There is a subclass of TimeFreqSnPMResults called <a title="nutmeg.stats.tfstats_results.AdaptedTimeFreqSnPMResults" class="reference external" href="../../api/generated/nutmeg.stats.tfstats_results.html#nutmeg.stats.tfstats_results.AdaptedTimeFreqSnPMResults"><tt class="xref docutils literal"><span class="pre">AdaptedTimeFreqSnPMResults</span></tt></a>. This class attempts to reconstruct the maximal statistic distribution based on the true statistic function and the corresponding corrected p values. The method <a title="nutmeg.stats.tfstats_results.adapt_mlab_tf_snpm_stats" class="reference external" href="../../api/generated/nutmeg.stats.tfstats_results.html#nutmeg.stats.tfstats_results.adapt_mlab_tf_snpm_stats"><tt class="xref docutils literal"><span class="pre">adapt_mlab_tf_snpm_stats()</span></tt></a> will return an AdaptedTimeFreqSnPMResults object, given a path to a mat file.</p>
</div>
</div>
<div class="section" id="viewing-the-results">
<h2>Viewing The Results<a class="headerlink" href="#viewing-the-results" title="Permalink to this headline">¶</a></h2>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">nutmeg.vis</span> <span class="kn">import</span> <span class="n">plot_tfbeam</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">avg</span> <span class="o">=</span> <span class="n">tester</span><span class="o">.</span><span class="n">avg_beams</span><span class="p">[</span><span class="mf">0</span><span class="p">]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">plot_tfbeam</span><span class="p">(</span><span class="n">avg</span><span class="p">,</span> <span class="n">stats</span><span class="o">=</span><span class="n">results</span><span class="p">,</span> <span class="n">with_3d</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="section" id="saving-loading-the-results">
<h2>Saving/Loading The Results<a class="headerlink" href="#saving-loading-the-results" title="Permalink to this headline">¶</a></h2>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">avg</span><span class="o">.</span><span class="n">save</span><span class="p">(</span><span class="s">&#39;cond12_contrast_avg&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">results</span><span class="o">.</span><span class="n">save</span><span class="p">(</span><span class="s">&#39;cond12_contrast_stats&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">ls</span>
<span class="go">cond12_contrast_avg.npy             cond12_contrast_stats.npy       stats_tutorial.py</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">res2</span> <span class="o">=</span> <span class="n">tfstats_results</span><span class="o">.</span><span class="n">load_tf_snpm_stats</span><span class="p">(</span><span class="s">&#39;cond12_contrast_stats.npy&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">nutmeg.core</span> <span class="kn">import</span> <span class="n">tfbeam</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">avg2</span> <span class="o">=</span> <span class="n">tfbeam</span><span class="o">.</span><span class="n">tfbeam_from_file</span><span class="p">(</span><span class="s">&#39;cond12_contrast_avg.npy&#39;</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>


          </div>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../../genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="../../modindex.html" title="Global Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="stats_ui.html" title="Using The Stats UI Tools"
             >next</a> |</li>
        <li class="right" >
          <a href="../tutorial.html" title="Tutorials"
             >previous</a> |</li>
  <li><a href="../../index.html">Home</a> |&nbsp;</li>
  <li><a href="../../contents.html">Documentation</a> |&nbsp;</li>

          <li><a href="../index.html" >User Guide</a> &raquo;</li> 
      </ul>
    </div>
    <div class="footer">
      &copy; Copyright 2009-2010, UCSF Biomagnetic Imaging Laboratory.
      Last updated on Jun 10, 2010.
      Created using <a href="http://sphinx.pocoo.org/">Sphinx</a> 0.6.2.
    </div>
  </body>
</html>